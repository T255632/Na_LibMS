<!-- navbar.html -->
<nav class="navbar bg-gray-800 text-white p-4 flex justify-between items-center">
    <div class="navbar-logo text-xl font-bold">
        <a href="/admin/admin_dashboard" class="text-white">NaLib Admin</a>
    </div>
    
    <ul class="navbar-links flex space-x-6 items-center">
        <li><a href="/admin/admin_dashboard" class="hover:text-gray-300"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
        <li><a href="/admin/staff_management" class="hover:text-gray-300"><i class="fas fa-users-cog"></i> Staff Management</a></li>
        <li><a href="/admin/member_management" class="hover:text-gray-300"><i class="fas fa-user-friends"></i> Member Management</a></li>
        <li><a href="/admin/resources_management" class="hover:text-gray-300"><i class="fas fa-book"></i> Library Resources</a></li>
        <li><a href="/admin/borrowing_rules" class="hover:text-gray-300"><i class="fas fa-cogs"></i> Borrowing Rules</a></li>
        <li><a href="/admin/manage_lending_transactions" class="hover:text-gray-300"><i class="fas fa-exchange-alt"></i> Lending Transactions</a></li>

        <!-- Notifications Icon -->
        <li class="relative">
            <a href="/admin/notifications" class="hover:text-gray-300">
                <i class="fas fa-bell text-xl"></i>
                <span id="notification-count" class="absolute -top-1 -right-2 bg-red-500 text-white text-xs font-bold rounded-full px-1 hidden"></span>
            </a>
        </li>

        <li><a href="/auth/logout" class="hover:text-gray-300"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
    </ul>
</nav>

<!-- Script to Fetch Unseen Notifications Count -->
<script>
    function fetchNotificationCount() {
        fetch('/admin/notifications/unseen_count')
            .then(response => response.json())
            .then(data => {
                const countBadge = document.getElementById('notification-count');
                if (data.unseen_count > 0) {
                    countBadge.textContent = data.unseen_count;
                    countBadge.classList.remove('hidden');
                } else {
                    countBadge.classList.add('hidden');
                }
            });
    }

    // Fetch notification count every 30 seconds
    setInterval(fetchNotificationCount, 30000);
    fetchNotificationCount();
</script>
